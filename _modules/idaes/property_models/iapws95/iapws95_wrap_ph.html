

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>idaes.property_models.iapws95.iapws95_wrap_ph &mdash; IDAES v1.0.1</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/idaes-logo.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/theme_and_schema.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> IDAES
          

          
            
            <img src="../../../../_static/idaes-logo-100x100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../standards.html">IDAES Modeling Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../core/index.html">Core Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../models/index.html">Unit Model Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../property_models/index.html">Property Model Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../vis/index.html">Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dmf/index.html">Data Management Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../version.html">IDAES Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples/index.html">Examples and tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/index.html">Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">IDAES</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>idaes.property_models.iapws95.iapws95_wrap_ph</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for idaes.property_models.iapws95.iapws95_wrap_ph</h1><div class="highlight"><pre>
<span></span><span class="c1">##############################################################################</span>
<span class="c1"># Institute for the Design of Advanced Energy Systems Process Systems</span>
<span class="c1"># Engineering Framework (IDAES PSE Framework) Copyright (c) 2018-2019, by the</span>
<span class="c1"># software owners: The Regents of the University of California, through</span>
<span class="c1"># Lawrence Berkeley National Laboratory,  National Technology &amp; Engineering</span>
<span class="c1"># Solutions of Sandia, LLC, Carnegie Mellon University, West Virginia</span>
<span class="c1"># University Research Corporation, et al. All rights reserved.</span>
<span class="c1">#</span>
<span class="c1"># Please see the files COPYRIGHT.txt and LICENSE.txt for full copyright and</span>
<span class="c1"># license information, respectively. Both files are also available online</span>
<span class="c1"># at the URL &quot;https://github.com/IDAES/idaes-pse&quot;.</span>
<span class="c1">##############################################################################</span>
<span class="sd">&quot;&quot;&quot;IDAES IAPWS-95 Steam properties</span>

<span class="sd">Dropped all critical enhancments and non-analytic terms ment to imporve accruacy</span>
<span class="sd">near the critical point. These tend to cause singularities in the equations, and</span>
<span class="sd">it is assumend that we will try to avoid operating very close to the critical</span>
<span class="sd">point.</span>

<span class="sd"> References: (some of this is only used in the C++ part)</span>
<span class="sd">   International Association for the Properties of Water and Steam (2016).</span>
<span class="sd">       IAPWS R6-95 (2016), &quot;Revised Release on the IAPWS Formulation 1995 for</span>
<span class="sd">       the Properties of Ordinary Water Substance for General Scientific Use,&quot;</span>
<span class="sd">       URL: http://iapws.org/relguide/IAPWS95-2016.pdf</span>
<span class="sd">   Wagner, W.,  A. Pruss (2002). &quot;The IAPWS Formulation 1995 for the</span>
<span class="sd">       Thermodynamic Properties of Ordinary Water Substance for General and</span>
<span class="sd">       Scientific Use.&quot; J. Phys. Chem. Ref. Data, 31, 387-535.</span>
<span class="sd">   Wagner, W. et al. (2000). &quot;The IAPWS Industrial Formulation 1997 for the</span>
<span class="sd">       Thermodynamic Properties of Water and Steam,&quot; ASME J. Eng. Gas Turbines</span>
<span class="sd">       and Power, 122, 150-182.</span>
<span class="sd">   Akasaka, R. (2008). &quot;A Reliable and Useful Method to Determine the Saturation</span>
<span class="sd">       State from Helmholtz Energy Equations of State.&quot; Journal of Thermal</span>
<span class="sd">       Science and Technology, 3(3), 442-451.</span>
<span class="sd">   International Association for the Properties of Water and Steam (2011).</span>
<span class="sd">       IAPWS R15-11, &quot;Release on the IAPWS Formulation 2011 for the</span>
<span class="sd">       Thermal Conductivity of Ordinary Water Substance,&quot;</span>
<span class="sd">       URL: http://iapws.org/relguide/ThCond.pdf</span>
<span class="sd">   International Association for the Properties of Water and Steam (2008).</span>
<span class="sd">       IAPWS R12-08, &quot;Release on the IAPWS Formulation 2008 for the Viscosity of</span>
<span class="sd">       Ordinary Water Substance,&quot;</span>
<span class="sd">       URL: http://iapws.org/relguide/visc.pdf</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">division</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;John Eslick&quot;</span>

<span class="c1"># Import Python libraries</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Import Pyomo libraries</span>
<span class="kn">from</span> <span class="nn">pyomo.environ</span> <span class="k">import</span> <span class="n">Constraint</span><span class="p">,</span> <span class="n">Expression</span><span class="p">,</span> <span class="n">Param</span><span class="p">,</span> <span class="n">PositiveReals</span><span class="p">,</span>\
                          <span class="n">RangeSet</span><span class="p">,</span> <span class="n">Reals</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">Var</span><span class="p">,</span> <span class="n">ExternalFunction</span><span class="p">,</span>\
                          <span class="n">NonNegativeReals</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span> <span class="n">sqrt</span><span class="p">,</span> <span class="n">log</span><span class="p">,</span> <span class="n">tanh</span><span class="p">,</span> <span class="n">ConcreteModel</span>
<span class="kn">from</span> <span class="nn">pyomo.opt</span> <span class="k">import</span> <span class="n">SolverFactory</span><span class="p">,</span> <span class="n">TerminationCondition</span>
<span class="kn">from</span> <span class="nn">pyomo.core.kernel.component_set</span> <span class="k">import</span> <span class="n">ComponentSet</span>
<span class="kn">from</span> <span class="nn">pyutilib.misc.config</span> <span class="k">import</span> <span class="n">ConfigValue</span>

<span class="c1"># Import IDAES</span>
<span class="kn">from</span> <span class="nn">idaes.core</span> <span class="k">import</span> <span class="n">declare_process_block_class</span><span class="p">,</span> <span class="n">ProcessBlock</span><span class="p">,</span> \
                       <span class="n">StateBlock</span><span class="p">,</span> <span class="n">StateBlockData</span><span class="p">,</span> <span class="n">PhysicalParameterBlock</span>

<span class="c1"># Logger</span>
<span class="n">_log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<div class="viewcode-block" id="htpx"><a class="viewcode-back" href="../../../../property_models/water.html#idaes.property_models.iapws95.iapws95_wrap_ph.htpx">[docs]</a><span class="k">def</span> <span class="nf">htpx</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">P</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Conveneince function to calculate steam enthalpy from temperature and</span>
<span class="sd">    either pressure or vapor fraction. This function can be used for inlet</span>
<span class="sd">    streams and initialization where temperature is known instread of enthalpy.</span>
<span class="sd">    Args:</span>
<span class="sd">        T: Temperature [K]</span>
<span class="sd">        P: Pressure [Pa], None if saturated steam</span>
<span class="sd">        x: Vapor fraction [mol vapor/mol total], None if superheated or subcooled</span>

<span class="sd">    Returns:</span>
<span class="sd">        Molar enthalpy [J/mol].</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">ConcreteModel</span><span class="p">()</span>
    <span class="n">model</span><span class="o">.</span><span class="n">prop_param</span> <span class="o">=</span> <span class="n">Iapws95ParameterBlock</span><span class="p">()</span>
    <span class="n">prop</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">prop</span> <span class="o">=</span> <span class="n">Iapws95StateBlock</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;parameters&quot;</span><span class="p">:</span><span class="n">model</span><span class="o">.</span><span class="n">prop_param</span><span class="p">})</span>

    <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">Tsat</span> <span class="o">=</span> <span class="mf">647.096</span><span class="o">/</span><span class="n">value</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">func_tau_sat</span><span class="p">(</span><span class="n">P</span><span class="o">/</span><span class="mi">1000</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">value</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">Tsat</span> <span class="ow">or</span> <span class="n">value</span><span class="p">(</span><span class="n">P</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">22064</span><span class="p">:</span> <span class="c1">#liquid</span>
            <span class="k">return</span> <span class="n">value</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">func_hlpt</span><span class="p">(</span><span class="n">P</span><span class="o">/</span><span class="mi">1000</span><span class="p">,</span> <span class="mf">647.096</span><span class="o">/</span><span class="n">T</span><span class="p">)</span><span class="o">*</span><span class="n">prop</span><span class="o">.</span><span class="n">mw</span><span class="o">*</span><span class="mf">1000.0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#vapor</span>
            <span class="k">return</span> <span class="n">value</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">func_hvpt</span><span class="p">(</span><span class="n">P</span><span class="o">/</span><span class="mi">1000</span><span class="p">,</span> <span class="mf">647.096</span><span class="o">/</span><span class="n">T</span><span class="p">)</span><span class="o">*</span><span class="n">prop</span><span class="o">.</span><span class="n">mw</span><span class="o">*</span><span class="mf">1000.0</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">P</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">Psat</span> <span class="o">=</span> <span class="n">value</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">func_p_sat</span><span class="p">(</span><span class="mf">647.096</span><span class="o">/</span><span class="n">T</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">value</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">func_hlpt</span><span class="p">(</span><span class="n">Psat</span><span class="p">,</span> <span class="mf">647.096</span><span class="o">/</span><span class="n">T</span><span class="p">)</span><span class="o">*</span><span class="n">prop</span><span class="o">.</span><span class="n">mw</span><span class="o">*</span><span class="mf">1000.0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span>\
            <span class="n">value</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">func_hlpt</span><span class="p">(</span><span class="n">Psat</span><span class="p">,</span> <span class="mf">647.096</span><span class="o">/</span><span class="n">T</span><span class="p">)</span><span class="o">*</span><span class="n">prop</span><span class="o">.</span><span class="n">mw</span><span class="o">*</span><span class="mf">1000.0</span><span class="p">)</span><span class="o">*</span><span class="n">x</span></div>

<div class="viewcode-block" id="Iapws95ParameterBlockData"><a class="viewcode-back" href="../../../../property_models/water.html#idaes.property_models.iapws95.iapws95_wrap_ph.Iapws95ParameterBlockData">[docs]</a><span class="nd">@declare_process_block_class</span><span class="p">(</span><span class="s2">&quot;Iapws95ParameterBlock&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Iapws95ParameterBlockData</span><span class="p">(</span><span class="n">PhysicalParameterBlock</span><span class="p">):</span>

<div class="viewcode-block" id="Iapws95ParameterBlockData.build"><a class="viewcode-back" href="../../../../property_models/water.html#idaes.property_models.iapws95.iapws95_wrap_ph.Iapws95ParameterBlockData.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Iapws95ParameterBlockData</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state_block_class</span> <span class="o">=</span> <span class="n">Iapws95StateBlock</span>
        <span class="c1"># Location of the *.so or *.dll file for external functions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plib</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plib</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plib</span><span class="p">,</span> <span class="s2">&quot;iapws95.so&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">available</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plib</span><span class="p">)</span>
        <span class="c1"># Phase list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">private_phase_list</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Vap&quot;</span><span class="p">,</span> <span class="s2">&quot;Liq&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phase_list</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Mix&quot;</span><span class="p">])</span>
        <span class="c1"># Component list - a list of component identifiers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">component_list</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;H2O&#39;</span><span class="p">])</span>
        <span class="c1"># Parameters, these should match what&#39;s in the C code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temperature_crit</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="mf">647.096</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s1">&#39;Critical temperature [K]&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pressure_crit</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="mf">2.2064e7</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s1">&#39;Critical pressure [Pa]&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dens_mass_crit</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="mi">322</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s1">&#39;Critical density [kg/m3]&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gas_const</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="mf">8.3144598</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s1">&#39;Gas Constant [J/mol/K]&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mw</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="mf">0.01801528</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s1">&#39;Molecular weight [kg/mol]&#39;</span><span class="p">)</span>
        <span class="c1">#Thermal conductivity parameters.</span>
        <span class="c1"># &quot;Release on the IAPWS Formulation 2011 for the Thermal Conductivity of</span>
        <span class="c1"># Ordinary Water Substance&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tc_L0</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">RangeSet</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">initialize</span><span class="o">=</span><span class="p">{</span>
            <span class="mi">0</span><span class="p">:</span><span class="mf">2.443221e-3</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">:</span><span class="mf">1.323095e-2</span><span class="p">,</span>
            <span class="mi">2</span><span class="p">:</span><span class="mf">6.770357e-3</span><span class="p">,</span>
            <span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="mf">3.454586e-3</span><span class="p">,</span>
            <span class="mi">4</span><span class="p">:</span><span class="mf">4.096266e-4</span><span class="p">},</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;0th order themalcondutivity paramters&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tc_L1</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">RangeSet</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">RangeSet</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="n">initialize</span><span class="o">=</span><span class="p">{</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="mf">1.60397357</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="mf">2.33771842</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="mf">2.19650529</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="o">-</span><span class="mf">1.21051378</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="o">-</span><span class="mf">2.7203370</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="o">-</span><span class="mf">0.646013523</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="o">-</span><span class="mf">2.78843778</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="o">-</span><span class="mf">4.54580785</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mf">1.60812989</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mf">4.57586331</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="mf">0.111443906</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="mf">1.53616167</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="mf">3.55777244</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="o">-</span><span class="mf">0.621178141</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="o">-</span><span class="mf">3.18369245</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span><span class="mf">0.102997357</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span><span class="o">-</span><span class="mf">0.463045512</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span><span class="o">-</span><span class="mf">1.40944978</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span><span class="mf">0.0716373224</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span><span class="mf">1.1168348</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span><span class="o">-</span><span class="mf">0.0504123634</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span><span class="mf">0.0832827019</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span><span class="mf">0.275418278</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span><span class="o">-</span><span class="mf">0.19268305</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span><span class="mf">0.00609859258</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span><span class="o">-</span><span class="mf">0.00719201245</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span><span class="o">-</span><span class="mf">0.0205938816</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span><span class="mf">0.012913842</span><span class="p">},</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;1st order themalcondutivity paramters&quot;</span><span class="p">)</span>
        <span class="c1">#Viscosity paramters</span>
        <span class="c1">#&quot;Release on the IAPWS Formulation 2008 for the Viscosity of</span>
        <span class="c1"># Ordinary Water Substance &quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visc_H0</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">RangeSet</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="n">initialize</span><span class="o">=</span><span class="p">{</span>
            <span class="mi">0</span><span class="p">:</span><span class="mf">1.67752</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">:</span><span class="mf">2.20462</span><span class="p">,</span>
            <span class="mi">2</span><span class="p">:</span><span class="mf">0.6366564</span><span class="p">,</span>
            <span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="mf">0.241605</span><span class="p">},</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;0th order viscosity parameters&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">visc_H1</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span><span class="n">RangeSet</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="n">RangeSet</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span> <span class="n">initialize</span><span class="o">=</span><span class="p">{</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="mf">5.20094e-1</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="mf">8.50895e-2</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="o">-</span><span class="mf">1.08374</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="o">-</span><span class="mf">2.89555e-1</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mf">2.22531e-1</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mf">9.99115e-1</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mf">1.88797</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mf">1.26613</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mf">1.20573e-1</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="o">-</span><span class="mf">2.81378e-1</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="o">-</span><span class="mf">9.06851e-1</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="o">-</span><span class="mf">7.72479e-1</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="o">-</span><span class="mf">4.89837e-1</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="o">-</span><span class="mf">2.57040e-1</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span><span class="mf">1.61913e-1</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span><span class="mf">2.57399e-1</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span><span class="o">-</span><span class="mf">3.25372e-2</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span><span class="mf">6.98452e-2</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span><span class="mf">8.72102e-3</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">):</span><span class="o">-</span><span class="mf">4.35673e-3</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">):</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">):</span><span class="o">-</span><span class="mf">5.93264e-4</span><span class="p">},</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;1st order viscosity parameters&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Iapws95ParameterBlockData.define_metadata"><a class="viewcode-back" href="../../../../property_models/water.html#idaes.property_models.iapws95.iapws95_wrap_ph.Iapws95ParameterBlockData.define_metadata">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">define_metadata</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">add_properties</span><span class="p">({</span>
            <span class="s1">&#39;temperature_crit&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;K&#39;</span><span class="p">},</span>
            <span class="s1">&#39;pressure_crit&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;Pa&#39;</span><span class="p">},</span>
            <span class="s1">&#39;dens_mass_crit&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;kg/m^3&#39;</span><span class="p">},</span>
            <span class="s1">&#39;gas_const&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;J/mol.K&#39;</span><span class="p">},</span>
            <span class="s1">&#39;mw&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;kg/mol&#39;</span><span class="p">},</span>
            <span class="s1">&#39;temperature_sat&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;K&#39;</span><span class="p">},</span>
            <span class="s1">&#39;flow_mol&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;mol/s&#39;</span><span class="p">},</span>
            <span class="s1">&#39;temperature&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;K&#39;</span><span class="p">},</span>
            <span class="s1">&#39;pressure&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;Pa&#39;</span><span class="p">},</span>
            <span class="s1">&#39;vapor_frac&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">},</span>
            <span class="s1">&#39;dens_mass_phase&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;kg/m^3&#39;</span><span class="p">},</span>
            <span class="s1">&#39;temperature_red&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">},</span>
            <span class="s1">&#39;pressure_sat&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;kPa&#39;</span><span class="p">},</span>
            <span class="s1">&#39;enth_mol_phase&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;J/mol&#39;</span><span class="p">},</span>
            <span class="s1">&#39;entr_mol_phase&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;J/mol.K&#39;</span><span class="p">},</span>
            <span class="s1">&#39;cp_mol_phase&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;J/mol.K&#39;</span><span class="p">},</span>
            <span class="s1">&#39;cv_mol_phase&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;J/mol.K&#39;</span><span class="p">},</span>
            <span class="s1">&#39;speed_sound_phase&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;m/s&#39;</span><span class="p">},</span>
            <span class="s1">&#39;dens_mol_phase&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;mol/m^3&#39;</span><span class="p">},</span>
            <span class="s1">&#39;therm_cond_phase&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;W/m.K&#39;</span><span class="p">},</span>
            <span class="s1">&#39;visc_d_phase&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;Pa.s&#39;</span><span class="p">},</span>
            <span class="s1">&#39;visc_k_phase&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;m^2/s&#39;</span><span class="p">},</span>
            <span class="s1">&#39;phase_frac&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">},</span>
            <span class="s1">&#39;flow_mol_comp&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;mol/s&#39;</span><span class="p">},</span>
            <span class="s1">&#39;enth_mol&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;J/mol&#39;</span><span class="p">},</span>
            <span class="s1">&#39;entr_mol&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;J/mol.K&#39;</span><span class="p">},</span>
            <span class="s1">&#39;cp_mol&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;J/mol.K&#39;</span><span class="p">},</span>
            <span class="s1">&#39;cv_mol&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;J/mol.K&#39;</span><span class="p">},</span>
            <span class="s1">&#39;heat_capacity_ratio&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">},</span>
            <span class="s1">&#39;dens_mass&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;kg/m^3&#39;</span><span class="p">},</span>
            <span class="s1">&#39;dens_mol&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;mol/m^3&#39;</span><span class="p">},</span>
            <span class="s1">&#39;dh_vap_mol&#39;</span><span class="p">:{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;J/mol&#39;</span><span class="p">}})</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">add_default_units</span><span class="p">({</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span>
            <span class="s1">&#39;length&#39;</span><span class="p">:</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span>
            <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="s1">&#39;kg&#39;</span><span class="p">,</span>
            <span class="s1">&#39;amount&#39;</span><span class="p">:</span> <span class="s1">&#39;mol&#39;</span><span class="p">,</span>
            <span class="s1">&#39;temperature&#39;</span><span class="p">:</span> <span class="s1">&#39;K&#39;</span><span class="p">,</span>
            <span class="s1">&#39;energy&#39;</span><span class="p">:</span> <span class="s1">&#39;J&#39;</span><span class="p">,</span>
            <span class="s1">&#39;holdup&#39;</span><span class="p">:</span> <span class="s1">&#39;mol&#39;</span><span class="p">})</span></div></div>


<span class="k">class</span> <span class="nc">_StateBlock</span><span class="p">(</span><span class="n">StateBlock</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class contains methods which should be applied to Property Blocks as a</span>
<span class="sd">    whole, rather than individual elements of indexed Property Blocks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_set_fixed</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">v</span><span class="o">.</span><span class="n">fix</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">v</span><span class="o">.</span><span class="n">unfix</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">flags</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">hold_state</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;hold_state&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">():</span> <span class="c1">#</span>
            <span class="n">flags</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">flow_mol</span><span class="o">.</span><span class="n">fixed</span><span class="p">,</span>
                        <span class="n">v</span><span class="o">.</span><span class="n">enth_mol</span><span class="o">.</span><span class="n">fixed</span><span class="p">,</span>
                        <span class="n">v</span><span class="o">.</span><span class="n">pressure</span><span class="o">.</span><span class="n">fixed</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">hold_state</span><span class="p">:</span>
                <span class="n">v</span><span class="o">.</span><span class="n">flow_mol</span><span class="o">.</span><span class="n">fix</span><span class="p">()</span>
                <span class="n">v</span><span class="o">.</span><span class="n">enth_mol</span><span class="o">.</span><span class="n">fix</span><span class="p">()</span>
                <span class="n">v</span><span class="o">.</span><span class="n">pressure</span><span class="o">.</span><span class="n">fix</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">flags</span>

    <span class="k">def</span> <span class="nf">release_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">flags</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_fixed</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">flow_mol</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_fixed</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">enth_mol</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_fixed</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">pressure</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>


<div class="viewcode-block" id="Iapws95StateBlockData"><a class="viewcode-back" href="../../../../property_models/water.html#idaes.property_models.iapws95.iapws95_wrap_ph.Iapws95StateBlockData">[docs]</a><span class="nd">@declare_process_block_class</span><span class="p">(</span><span class="s2">&quot;Iapws95StateBlock&quot;</span><span class="p">,</span> <span class="n">block_class</span><span class="o">=</span><span class="n">_StateBlock</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    This is some placeholder doc.</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Iapws95StateBlockData</span><span class="p">(</span><span class="n">StateBlockData</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is a property package for calcuating thermophysical properties of water</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Fold</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span><span class="o">.</span><span class="n">value</span>
        <span class="n">Hold</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">enth_mol</span><span class="o">.</span><span class="n">value</span>
        <span class="n">Pold</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="o">.</span><span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;flow_mol&quot;</span><span class="p">,</span> <span class="n">Fold</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enth_mol</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;enth_mol&quot;</span><span class="p">,</span> <span class="n">Hold</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;presssure&quot;</span><span class="p">,</span> <span class="n">Pold</span><span class="p">)</span>
        <span class="c1">#</span>
        <span class="c1"># This is where stuff would get initialized if there was anything to do</span>
        <span class="c1">#</span>
        <span class="c1"># reset the values of fixed variables so this doesn&#39;t change problem</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span><span class="o">.</span><span class="n">is_fixed</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Fold</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="o">.</span><span class="n">is_fixed</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Pold</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enth_mol</span><span class="o">.</span><span class="n">is_fixed</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">enth_mol</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Hold</span>

<div class="viewcode-block" id="Iapws95StateBlockData.build"><a class="viewcode-back" href="../../../../property_models/water.html#idaes.property_models.iapws95.iapws95_wrap_ph.Iapws95StateBlockData.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Callable method for Block construction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Iapws95StateBlockData</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>

        <span class="c1"># parameters</span>
        <span class="n">component_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">component_list</span>
        <span class="n">phase_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">phase_list</span>
        <span class="n">private_phase_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">private_phase_list</span>
        <span class="n">temperature_crit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">temperature_crit</span>
        <span class="n">pressure_crit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">pressure_crit</span>
        <span class="n">dens_mass_crit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">dens_mass_crit</span>
        <span class="n">gas_const</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gas_const</span>

        <span class="c1"># Set if the IAPWS library is available.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">available</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">available</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">available</span><span class="p">:</span>
            <span class="n">_log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;IAPWS library file not found. Was it compiled?&quot;</span><span class="p">)</span>

        <span class="c1"># Variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="n">NonNegativeReals</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Total flow [mol/s]&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;F&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="n">PositiveReals</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">1e5</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Pressure [Pa]&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;P&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">enth_mol</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="n">initialize</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Total molar enthalpy (J/mol)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enth_mol</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;h&quot;</span>

        <span class="c1"># For variables that show up in ports specify extensive and intensive</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extensive_set</span> <span class="o">=</span> <span class="n">ComponentSet</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span><span class="p">,))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intensive_set</span> <span class="o">=</span> <span class="n">ComponentSet</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">enth_mol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="p">))</span>

        <span class="c1"># External Functions (some of these are included only for testing)</span>
        <span class="n">plib</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">plib</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_p</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;p&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_u</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;u&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_s</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_h</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;h&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_hvpt</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;hvpt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_hlpt</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;hlpt&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_tau</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;tau&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_vf</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;vf&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_g</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_f</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;f&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_cv</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;cv&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_cp</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;cp&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_w</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_delta_liq</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;delta_liq&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_delta_vap</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;delta_vap&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_delta_sat_l</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;delta_sat_l&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_delta_sat_v</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;delta_sat_v&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_p_sat</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;p_sat&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_tau_sat</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;tau_sat&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_phi0</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;phi0&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_phi0_delta</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;phi0_delta&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_phi0_delta2</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;phi0_delta2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_phi0_tau</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;phi0_tau&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_phi0_tau2</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;phi0_tau2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_phir</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;phir&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_phir_delta</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;phir_delta&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_phir_delta2</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;phir_delta2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_phir_tau</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;phir_tau&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_phir_tau2</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;phir_tau2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_phir_delta_tau</span> <span class="o">=</span> <span class="n">ExternalFunction</span><span class="p">(</span><span class="n">library</span><span class="o">=</span><span class="n">plib</span><span class="p">,</span>
            <span class="n">function</span><span class="o">=</span><span class="s2">&quot;phir_delta_tau&quot;</span><span class="p">)</span>

        <span class="c1"># Calcuations (In this case all expressions no constraints)</span>

        <span class="c1"># molecular weight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mw</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">mw</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;molecular weight [kg/mol]&quot;</span><span class="p">)</span>
        <span class="n">mw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mw</span>
        <span class="n">mw</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;M&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">enth_mass</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">enth_mol</span><span class="o">/</span><span class="n">mw</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Mass enthalpy (J/kg)&quot;</span><span class="p">)</span>

        <span class="c1"># Conveneint shorter names and expressions</span>
        <span class="n">P</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="o">/</span><span class="mf">1000.0</span> <span class="c1"># Pressure expr [kPA] (for external func)</span>
        <span class="n">h_mass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">enth_mass</span><span class="o">/</span><span class="mi">1000</span> <span class="c1">#enthalpy expr [kJ/kg] (for external func)</span>
        <span class="n">Tc</span> <span class="o">=</span> <span class="n">temperature_crit</span> <span class="c1"># critical temperature</span>

        <span class="c1"># Temperature expression, external function takes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">Tc</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">func_tau</span><span class="p">(</span><span class="n">h_mass</span><span class="p">,</span> <span class="n">P</span><span class="p">),</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Temperature (K)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;T&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">vapor_frac</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">func_vf</span><span class="p">(</span><span class="n">h_mass</span><span class="p">,</span> <span class="n">P</span><span class="p">),</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Vapor mole fraction (mol vapor/mol total)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vapor_frac</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;y&quot;</span>

        <span class="c1"># More conveneint shorter names and expressions</span>
        <span class="n">rhoc</span> <span class="o">=</span> <span class="n">dens_mass_crit</span>
        <span class="n">T</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span>
        <span class="n">vf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapor_frac</span>
        <span class="n">phlist</span> <span class="o">=</span> <span class="n">private_phase_list</span>

        <span class="c1"># Saturation temperature expression</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temperature_sat</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">Tc</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">func_tau_sat</span><span class="p">(</span><span class="n">P</span><span class="p">),</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Stauration temperature (K)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temperature_sat</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;T_\{sat\}&quot;</span>

        <span class="c1"># Saturation tau (tau = Tc/T)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tau_sat</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">func_tau_sat</span><span class="p">(</span><span class="n">P</span><span class="p">))</span>

        <span class="c1"># Reduced temperature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temperature_red</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">T</span><span class="o">/</span><span class="n">Tc</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;reduced temperature T/Tc (unitless)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temperature_red</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;T_r&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tau</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">Tc</span><span class="o">/</span><span class="n">T</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Tc/T (unitless)&quot;</span><span class="p">)</span>
        <span class="n">tau</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tau</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tau</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">tau&quot;</span>

        <span class="c1"># Saturation pressure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pressure_sat</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="mi">1000</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">func_p_sat</span><span class="p">(</span><span class="n">tau</span><span class="p">),</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Saturation pressure (Pa)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pressure_sat</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;P_\{sat\}&quot;</span>
        <span class="n">Psat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressure_sat</span><span class="o">/</span><span class="mf">1000.0</span> <span class="c1"># expression for Psat in kPA</span>

        <span class="c1"># Calculate liquid and vapor density.  If the phase doesn&#39;t exist,</span>
        <span class="c1"># density will be calculated at the saturation or critical pressure</span>
        <span class="k">def</span> <span class="nf">rule_dens_mass</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="s2">&quot;Liq&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">rhoc</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">func_delta_liq</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="n">tau</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">rhoc</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">func_delta_vap</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="n">tau</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dens_mass_phase</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">phlist</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">rule_dens_mass</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Mass density by phase (kg/m3)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dens_mass_phase</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">rho&quot;</span>

        <span class="c1"># Reduced Density (no _mass_ identifier because mass or mol is same)</span>
        <span class="k">def</span> <span class="nf">rule_dens_red</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dens_mass_phase</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">/</span><span class="n">rhoc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dens_phase_red</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">phlist</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">rule_dens_red</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;reduced density (unitless)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dens_phase_red</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">delta&quot;</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dens_phase_red</span> <span class="c1"># this shorter name is from IAPWS</span>

        <span class="c1"># Phase property expressions all converted to SI</span>

        <span class="c1"># Saturated Enthalpy</span>
        <span class="k">def</span> <span class="nf">rule_enth_mol_sat_phase</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="s2">&quot;Liq&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="mi">1000</span><span class="o">*</span><span class="n">mw</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">func_hlpt</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tau_sat</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p</span> <span class="o">==</span> <span class="s2">&quot;Vap&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="mi">1000</span><span class="o">*</span><span class="n">mw</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">func_hvpt</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tau_sat</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enth_mol_sat_phase</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">phlist</span><span class="p">,</span>
            <span class="n">rule</span><span class="o">=</span><span class="n">rule_enth_mol_sat_phase</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Saturated enthalpy of the phases at pressure (J/mol)&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dh_vap_mol</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span>
            <span class="n">expr</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">enth_mol_sat_phase</span><span class="p">[</span><span class="s2">&quot;Vap&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">enth_mol_sat_phase</span><span class="p">[</span><span class="s2">&quot;Liq&quot;</span><span class="p">],</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Enthaply of vaporization at pressure and saturation (J/mol)&quot;</span><span class="p">)</span>

        <span class="c1"># Phase Enthalpy</span>
        <span class="k">def</span> <span class="nf">rule_enth_mol_phase</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">1000</span><span class="o">*</span><span class="n">mw</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">func_h</span><span class="p">(</span><span class="n">delta</span><span class="p">[</span><span class="n">p</span><span class="p">],</span> <span class="n">tau</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enth_mol_phase</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">phlist</span><span class="p">,</span>
            <span class="n">rule</span><span class="o">=</span><span class="n">rule_enth_mol_phase</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Phase enthalpy or saturated if phase doesn&#39;t exist [J/mol]&quot;</span><span class="p">)</span>

        <span class="c1"># Phase Entropy</span>
        <span class="k">def</span> <span class="nf">rule_entr_mol_phase</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">1000</span><span class="o">*</span><span class="n">mw</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">func_s</span><span class="p">(</span><span class="n">delta</span><span class="p">[</span><span class="n">p</span><span class="p">],</span> <span class="n">tau</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entr_mol_phase</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">phlist</span><span class="p">,</span>
            <span class="n">rule</span><span class="o">=</span><span class="n">rule_entr_mol_phase</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Phase entropy or saturated if phase doesn&#39;t exist [J/mol/K]&quot;</span><span class="p">)</span>

        <span class="c1"># Phase constant pressure heat capacity, cp</span>
        <span class="k">def</span> <span class="nf">rule_cp_mol_phase</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">1000</span><span class="o">*</span><span class="n">mw</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">func_cp</span><span class="p">(</span><span class="n">delta</span><span class="p">[</span><span class="n">p</span><span class="p">],</span> <span class="n">tau</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp_mol_phase</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">phlist</span><span class="p">,</span>
            <span class="n">rule</span><span class="o">=</span><span class="n">rule_cp_mol_phase</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Phase cp or saturated if phase doesn&#39;t exist [J/mol/K]&quot;</span><span class="p">)</span>

        <span class="c1"># Phase constant pressure heat capacity, cv</span>
        <span class="k">def</span> <span class="nf">rule_cv_mol_phase</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">1000</span><span class="o">*</span><span class="n">mw</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">func_cv</span><span class="p">(</span><span class="n">delta</span><span class="p">[</span><span class="n">p</span><span class="p">],</span> <span class="n">tau</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cv_mol_phase</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">phlist</span><span class="p">,</span>
            <span class="n">rule</span><span class="o">=</span><span class="n">rule_cv_mol_phase</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Phase cv or saturated if phase doesn&#39;t exist [J/mol/K]&quot;</span><span class="p">)</span>

        <span class="c1"># Phase speed of sound</span>
        <span class="k">def</span> <span class="nf">rule_speed_sound_phase</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func_w</span><span class="p">(</span><span class="n">delta</span><span class="p">[</span><span class="n">p</span><span class="p">],</span> <span class="n">tau</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed_sound_phase</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">phlist</span><span class="p">,</span>
            <span class="n">rule</span><span class="o">=</span><span class="n">rule_speed_sound_phase</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Phase speed of sound or saturated if phase doesn&#39;t exist [m/s]&quot;</span><span class="p">)</span>

        <span class="c1"># Phase Mole density</span>
        <span class="k">def</span> <span class="nf">rule_dens_mol_phase</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dens_mass_phase</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">/</span><span class="n">mw</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dens_mol_phase</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">phlist</span><span class="p">,</span>
            <span class="n">rule</span><span class="o">=</span><span class="n">rule_dens_mol_phase</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Phase mole density or saturated if phase doesn&#39;t exist [mol/m3]&quot;</span><span class="p">)</span>

        <span class="c1"># Phase Thermal conductiviy</span>
        <span class="k">def</span> <span class="nf">rule_tc</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="n">L0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">tc_L0</span>
            <span class="n">L1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">tc_L1</span>
            <span class="k">return</span> <span class="mf">1e-3</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="n">tau</span><span class="p">)</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">L0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">tau</span><span class="o">**</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">L0</span><span class="p">)</span><span class="o">*</span>\
                <span class="n">exp</span><span class="p">(</span><span class="n">delta</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">*</span><span class="nb">sum</span><span class="p">((</span><span class="n">tau</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="n">i</span><span class="o">*</span><span class="nb">sum</span><span class="p">(</span><span class="n">L1</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">delta</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="n">j</span>\
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">therm_cond_phase</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">phlist</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">rule_tc</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Thermal conductivity [W/K/m]&quot;</span><span class="p">)</span>

        <span class="c1"># Phase dynamic viscosity</span>
        <span class="k">def</span> <span class="nf">rule_mu</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="n">H0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">visc_H0</span>
            <span class="n">H1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">visc_H1</span>
            <span class="k">return</span> <span class="mf">1e-4</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="n">tau</span><span class="p">)</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">H0</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">tau</span><span class="o">**</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">H0</span><span class="p">)</span><span class="o">*</span>\
                <span class="n">exp</span><span class="p">(</span><span class="n">delta</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">*</span><span class="nb">sum</span><span class="p">((</span><span class="n">tau</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="n">i</span><span class="o">*</span><span class="nb">sum</span><span class="p">(</span><span class="n">H1</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">delta</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="n">j</span>\
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visc_d_phase</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">phlist</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">rule_mu</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Viscosity (dynamic) [Pa*s]&quot;</span><span class="p">)</span>

        <span class="c1"># Phase kinimatic viscosity</span>
        <span class="k">def</span> <span class="nf">rule_nu</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">visc_d_phase</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">dens_mass_phase</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visc_k_phase</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">phlist</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">rule_nu</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Kinematic viscosity [m^2/s]&quot;</span><span class="p">)</span>

        <span class="c1">#Phase fraction</span>
        <span class="k">def</span> <span class="nf">rule_phase_frac</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="s2">&quot;Vap&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">vf</span>
            <span class="k">elif</span> <span class="n">p</span> <span class="o">==</span> <span class="s2">&quot;Liq&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">vf</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phase_frac</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">phlist</span><span class="p">,</span>
            <span class="n">rule</span><span class="o">=</span><span class="n">rule_phase_frac</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Phase fraction [unitless]&quot;</span><span class="p">)</span>

        <span class="c1"># Component flow (for units that need it)</span>
        <span class="k">def</span> <span class="nf">component_flow</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flow_mol_comp</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">component_list</span><span class="p">,</span>
            <span class="n">rule</span><span class="o">=</span><span class="n">component_flow</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Total flow (both phases) of component [mol/s]&quot;</span><span class="p">)</span>

        <span class="c1"># Total (mixed phase) properties</span>

        <span class="c1">#Entropy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entr_mol</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span>
            <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phase_frac</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">entr_mol_phase</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">phlist</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entr_mol</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;s&quot;</span>
        <span class="c1">#cp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp_mol</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span>
            <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phase_frac</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">cp_mol_phase</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">phlist</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp_mol</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;c_p&quot;</span>
        <span class="c1">#cv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cv_mol</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span>
            <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phase_frac</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">cv_mol_phase</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">phlist</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cv_mol</span><span class="o">.</span><span class="n">latex_symbol</span> <span class="o">=</span> <span class="s2">&quot;c_v&quot;</span>
        <span class="c1">#mass density</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dens_mass</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span>
            <span class="mf">1.0</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phase_frac</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">*</span><span class="mf">1.0</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">dens_mass_phase</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">phlist</span><span class="p">))</span>
        <span class="c1">#mole density</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dens_mol</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span>
            <span class="mf">1.0</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phase_frac</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">*</span><span class="mf">1.0</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">dens_mol_phase</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">phlist</span><span class="p">))</span>
        <span class="c1">#heat capacity ratio</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">heat_capacity_ratio</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cp_mol</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">cv_mol</span><span class="p">)</span>
        <span class="c1">#Flows</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flow_vol</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">dens_mol</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Total liquid + vapor volumetric flow (m3/s)&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Iapws95StateBlockData.get_material_flow_terms"><a class="viewcode-back" href="../../../../property_models/water.html#idaes.property_models.iapws95.iapws95_wrap_ph.Iapws95StateBlockData.get_material_flow_terms">[docs]</a>    <span class="k">def</span> <span class="nf">get_material_flow_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="s2">&quot;Mix&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">phase_frac</span><span class="p">[</span><span class="n">p</span><span class="p">]</span></div>

<div class="viewcode-block" id="Iapws95StateBlockData.get_enthalpy_flow_terms"><a class="viewcode-back" href="../../../../property_models/water.html#idaes.property_models.iapws95.iapws95_wrap_ph.Iapws95StateBlockData.get_enthalpy_flow_terms">[docs]</a>    <span class="k">def</span> <span class="nf">get_enthalpy_flow_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="s2">&quot;Mix&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">enth_mol</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">enth_mol_phase</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">phase_frac</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span></div>

<div class="viewcode-block" id="Iapws95StateBlockData.get_material_density_terms"><a class="viewcode-back" href="../../../../property_models/water.html#idaes.property_models.iapws95.iapws95_wrap_ph.Iapws95StateBlockData.get_material_density_terms">[docs]</a>    <span class="k">def</span> <span class="nf">get_material_density_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="s2">&quot;Mix&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dens_mol</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dens_mol_phase</span><span class="p">[</span><span class="n">p</span><span class="p">]</span></div>

<div class="viewcode-block" id="Iapws95StateBlockData.get_enthalpy_density_terms"><a class="viewcode-back" href="../../../../property_models/water.html#idaes.property_models.iapws95.iapws95_wrap_ph.Iapws95StateBlockData.get_enthalpy_density_terms">[docs]</a>    <span class="k">def</span> <span class="nf">get_enthalpy_density_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="s2">&quot;Mix&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dens_mol</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">enth_mol</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dens_mol_phase</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">enth_mol_phase</span><span class="p">[</span><span class="n">p</span><span class="p">]</span></div>

<div class="viewcode-block" id="Iapws95StateBlockData.define_state_vars"><a class="viewcode-back" href="../../../../property_models/water.html#idaes.property_models.iapws95.iapws95_wrap_ph.Iapws95StateBlockData.define_state_vars">[docs]</a>    <span class="k">def</span> <span class="nf">define_state_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;flow_mol&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_mol</span><span class="p">,</span>
                <span class="s2">&quot;enth_mol&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">enth_mol</span><span class="p">,</span>
                <span class="s2">&quot;pressure&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="p">}</span></div>

    <span class="k">def</span> <span class="nf">extensive_state_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">extensive_set</span>

    <span class="k">def</span> <span class="nf">intensive_state_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">intensive_set</span>

    <span class="k">def</span> <span class="nf">model_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2019, David Miller et al.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>